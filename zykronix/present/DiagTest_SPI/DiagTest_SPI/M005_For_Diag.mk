#
# Warning: This Makefile is generated by the genmake program from the template:
#	gen_arx.mk - template for ARM compiler to build executables
#	It is advised that you not modify this by hand. If you want
#	to add something, you can change the gen_arx.mk template.
#	Copyright (c) ARM Ltd. 2002
#

TARGET		= ARM
INC_PATHS	= -Iinclude

# CFLAGS is the default flags rule. Others are added below
CFLAGS		= -g $(INC_PATHS)
CFLAGS_SRCS	= 
CFLAGS_COMP		= $(CC) -c $(CFLAGS)
CFLAGS_OBJS	= 


CARM	= -Iinclude -D_For_Diag -g --dwarf2 --cpu ARM926EJ-S
CARM_SRCS	= 		  .\sources\SYSUtility.c .\sources\SPI.c \
		  .\sources\main.c .\sources\retarget.c 
CARM_COMP	= c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armcc -c $$SRC $(CARM) -o $$OBJ
CARM_OBJS	= 		  For_Diag\SYSUtility.o For_Diag\SPI.o \
		  For_Diag\main.o For_Diag\retarget.o 

CARM_CPP	= -Iinclude -g --dwarf2 --cpp
CARM_CPP_SRCS	= 
CARM_CPP_COMP	= c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armcc -c $$SRC $(CARM_CPP) -o $$OBJ
CARM_CPP_OBJS	= 

CTHUMB	=  --thumb -g --dwarf2
CTHUMB_SRCS	= 
CTHUMB_COMP	= c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armcc -c $$SRC $(CTHUMB) -o $$OBJ
CTHUMB_OBJS	= 

CTHUMB_CPP	=  --thumb -g --dwarf2 --cpp
CTHUMB_CPP_SRCS	= 
CTHUMB_CPP_COMP	= c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armcc -c $$SRC $(CTHUMB_CPP) -o $$OBJ
CTHUMB_CPP_OBJS	= 

AARM	= -iinclude -pd "For_Diag SETL {TRUE}" -g --dwarf2 --cpu ARM926EJ-S
AARM_SRCS	= 		  .\sources\heap.s .\sources\init.s .\sources\stack.s \
		  .\sources\vectors.s 
AARM_COMP	= c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armasm $(AARM) -o $$OBJ $$SRC
AARM_OBJS	= 		  For_Diag\heap.o For_Diag\init.o For_Diag\stack.o \
		  For_Diag\vectors.o 

#FLAGS end here (put all flag groups above this line)

EXTHDRS		=
HDRS		=
LDFLAGS		=  --info totals --entry 0x00000000 --scatter scat_RAM_diag.scf 

# LIB_DEP is list of dependents for library build ($OBJS for example)
LIB_DEP		=
# LIB_ARGS is argument line for librarian
LIB_ARGS	=

# LIBS are system libraries as name
LIBS		=  

CC		= cl$(TARGET)
LINKER		= c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armlink 
LIBRARIAN	=
MAKENAME	= M005_For_Diag.mk
PRINT		= pr
PROGRAM		= For_Diag\M005.axf
BUILD_LIB	= none.lib
POST_BUILD	=
ALL_DEP		= $(PROGRAM) $(POST_BUILD)

OBJS		= $(CFLAGS_OBJS) $(CARM_OBJS) $(CARM_CPP_OBJS) $(CTHUMB_OBJS) \
	 $(CTHUMB_CPP_OBJS) $(AARM_OBJS) 
SRCS		= $(CFLAGS_SRCS) $(CARM_SRCS) $(CARM_CPP_SRCS) $(CTHUMB_SRCS) \
	 $(CTHUMB_CPP_SRCS) $(AARM_SRCS) 

# depend is for dependant rules that should not be linked in
DEPEND	=
O_DEPEND	= 

COMP_LINE	= $(CFLAGS_COMP)

# .c.o is default compile line if not explicitly defined

.c.o :
	$(COMP_LINE) $*.c

# all is first target 
all:		$(ALL_DEP)
		@+echo --- Build-all done ---

#LINK: next one is the link command
$(PROGRAM):     $(OBJS) $(DEPEND) $(O_DEPEND) $(MAKENAME)
		$(LINKER) $(LDFLAGS) $(OBJS) $(LIBS) -o $(PROGRAM)

	fromelf -c -o .\For_Diag\M005.dis .\For_Diag\M005.axf
#BUILD_LIB: this is only valid if filled in at macro point
$(BUILD_LIB):	$(LIB_DEP) $(OBJS) $(DEPEND) $(O_DEPEND) $(MAKENAME)
		$(LIBRARIAN) $(LIB_ARGS) $(BUILD_LIB) $(OBJS)

clean:
		+for %d in ($(OBJS) $(PROGRAM) $(BUILD_LIB)) do if exist %d del %d
rebuild:	clean all
depend:;	upddep $(MAKENAME)
index:;	ctags -wx $(HDRS) $(SRCS)
print:;	$(PRINT) $(HDRS) $(SRCS)
program:	$(PROGRAM)
tags:		$(HDRS) $(SRCS); ctags $(HDRS) $(SRCS)

# DEPEND: include files below
# Dependency summaries:
# System includes suppressed
INCLUDE_GLOBAL_H=include\global.h include\typedef.h include\regfile.h \
	 include\regbitsfield.h include\macro.h include\sysutility.h 
# DEPEND: end include files

For_Diag\SYSUtility.o: .\sources\SYSUtility.c $(INCLUDE_GLOBAL_H)
	c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armcc -c \
	 .\sources\SYSUtility.c $(CARM) -o For_Diag\SYSUtility.o
For_Diag\SPI.o: .\sources\SPI.c $(INCLUDE_GLOBAL_H)
	c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armcc -c .\sources\SPI.c \
	 $(CARM) -o For_Diag\SPI.o
For_Diag\main.o: .\sources\main.c $(INCLUDE_GLOBAL_H) include\declare.h
	c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armcc -c .\sources\main.c \
	 $(CARM) -o For_Diag\main.o
For_Diag\retarget.o: .\sources\retarget.c
	c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armcc -c \
	 .\sources\retarget.c $(CARM) -o For_Diag\retarget.o
For_Diag\heap.o: .\sources\heap.s
	c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armasm $(AARM) -o \
	 For_Diag\heap.o .\sources\heap.s
For_Diag\init.o: .\sources\init.s
	c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armasm $(AARM) -o \
	 For_Diag\init.o .\sources\init.s
For_Diag\stack.o: .\sources\stack.s
	c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armasm $(AARM) -o \
	 For_Diag\stack.o .\sources\stack.s
For_Diag\vectors.o: .\sources\vectors.s
	c:\progra~1\arm\rvct\programs\2.1\498\win_32~1\armasm $(AARM) -o \
	 For_Diag\vectors.o .\sources\vectors.s
